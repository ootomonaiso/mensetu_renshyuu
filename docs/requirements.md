# 学校特化型面接支援システム 要件定義書

**作成日**: 2025年11月28日  
**プロジェクト名**: 圧勝面接

---

## 1. プロジェクト概要

### 1.1 目的
学校現場における生徒と教師の面接練習を、第三者視点でリアルタイム評価・分析し、客観的なフィードバックを提供するシステムを構築する。

### 1.2 ターゲットユーザー
- **主要ユーザー**: 高校・大学の進路指導担当教師
- **二次ユーザー**: 就職・進学を控えた生徒
- **利用シーン**: 進路指導室での模擬面接、面接練習セッション

### 1.3 既存製品との差別化
- 学校が保有する生徒データ(成績、活動記録等)との連携
- 日本語特有の敬語・言葉遣いの詳細分析
- ローカル環境での動作(プライバシー重視)
- 複数教師による評価の一元管理
- 学校内での過去データ蓄積・活用

---

## 2. 機能要件

### 2.1 コア機能

#### A. リアルタイム面接評価機能
- **音声認識・文字起こし**
  - リアルタイムで面接内容をテキスト化
  - 発話者の自動識別(教師/生徒)
  - タイムスタンプ付き記録

- **音声分析**
  - 話速の測定
  - 声の大きさ・トーン分析
  - 間(ポーズ)の分析
  - イントネーション評価
  - 感情推定(自信度、緊張度など)

- **言語分析**
  - 敬語使用の適切性チェック
  - 言葉遣いの評価(「えーと」「あの」などのフィラー検出)
  - 文法チェック
  - キーワード検出(志望動機に関連する語彙など)

#### B. 評価・採点機能
- **評価項目のカスタマイズ**
  - 学校・面接種別ごとの評価項目設定
  - 評価基準のテンプレート管理
  
- **評価項目例**:
  - 身だしなみ・態度
  - 話し方(明瞭さ、スピード、声の大きさ)
  - 敬語・言葉遣い
  - 質問への適切性
  - 論理性・一貫性
  - 熱意・意欲
  - ※表情・アイコンタクト(Phase 4で対応予定)

- **リアルタイムメモ機能**
  - 評価者が気づいた点をタイムスタンプ付きで記録
  - 良かった点/改善点の分類

#### C. 生徒データ連携機能
- **基本情報管理**
  - 生徒プロフィール(学年、クラス、志望先)
  - 成績データ(得意科目、GPA等)
  - 活動記録(部活、委員会、ボランティア等)
  - 資格・検定取得状況

- **データ活用**
  - 生徒の実績に基づく想定質問の自動生成
  - 自己PR材料の提案
  - 志望先に応じた面接対策アドバイス

#### D. 履歴管理機能
- **個人の成長追跡**
  - 複数回の面接練習の比較
  - スコアの推移グラフ
  - 弱点の可視化
  - 過去セッションの振り返り再生

#### E. 個人レポート生成機能
- **生徒向けフィードバックレポート**
  - 総合評価スコア
  - 評価項目別の詳細スコア（レーダーチャート）
  - 良かった点・改善点の具体的指摘
  - 発話内容の文字起こし（ハイライト付き）
  - 次回までの具体的な練習課題
  - 過去セッションとの比較

- **教師向け指導レポート**
  - 詳細な分析データ（音声分析結果含む）
  - タイムスタンプ付きメモ一覧
  - 過去の指導履歴
  - 印刷可能なPDFフォーマット

### 2.2 副次機能
- **質問バンク管理**
  - よくある質問のデータベース
  - 業界・志望先別の質問集
  - 学校独自の質問追加

- **過去データ検索**
  - 先輩の面接記録(匿名化)
  - 志望先別の成功事例
  - 頻出質問の傾向

---

## 3. 非機能要件

### 3.1 性能要件
- リアルタイム文字起こしの遅延: 2秒以内
- 面接セッションの同時処理: 最大10セッション
- レポート生成時間: 30秒以内

### 3.2 セキュリティ・プライバシー
- 生徒の個人情報保護(個人情報保護法準拠)
- ローカルネットワーク内での運用
- データの暗号化保存
- アクセス権限管理(教師/管理者/生徒)
- データバックアップ機能

### 3.3 使いやすさ
- 教師が直感的に操作できるUI
- タブレット対応(面接室での使用を想定)
- 最小限のセットアップ(マイク接続のみ)

### 3.4 拡張性
- 新しい評価項目の追加が容易
- 他の学校システムとのデータ連携(CSV/API)
- 将来的なビデオ分析への対応

---

## 4. 技術要件

### 4.1 動作環境
- **推奨環境**: ローカルサーバー(学校内設置)
- **OS**: Windows/Linux
- **クライアント**: Webブラウザ(Chrome, Edge推奨)

### 4.2 技術スタック(確定版)

#### バックエンド
- **言語**: Python 3.11+
- **Webフレームワーク**: FastAPI
  - 理由: 非同期対応、自動APIドキュメント生成、型ヒント活用
  - WebSocket対応でリアルタイム処理に最適
- **データベース**: SQLite → PostgreSQL (段階的移行)
  - Phase 1: SQLite (開発・小規模校用)
  - Phase 2以降: PostgreSQL (複数校展開時)
- **ORM**: SQLAlchemy 2.0+
- **マイグレーション**: Alembic

#### フロントエンド
- **フレームワーク**: React 18+ with TypeScript
  - 理由: コンポーネント再利用性、豊富なエコシステム
- **状態管理**: Zustand (軽量でシンプル)
- **UI ライブラリ**: shadcn/ui + Tailwind CSS
  - 理由: モダン、カスタマイズ容易、軽量
- **ビルドツール**: Vite
- **リアルタイム通信**: WebSocket (FastAPI標準機能)

#### 音声処理
- **音声認識**: OpenAI Whisper (faster-whisper)
  - モデル: base/small (バランス重視)
  - GPU推奨、CPU環境でも動作可能
- **音響分析**: 
  - librosa: 音声特徴量抽出
  - pydub: 音声ファイル処理
  - numpy/scipy: 数値計算
- **形態素解析**: sudachipy + SudachiDict
  - 理由: GiNZAより軽量、敬語判定に適している
- **敬語判定**: カスタムルールエンジン
  - 辞書ベース + 品詞パターンマッチング
  - 将来的にMLモデル追加検討

#### AI/ML
- **LLM (オプション)**: 
  - ローカルLLM (Ollama + llama3など) または
  - OpenAI API (フィードバック生成用)
  - Phase 3で検討・導入

#### その他
- **タスクキュー**: Celery + Redis
  - 音声処理の非同期実行
  - レポート生成の遅延実行
- **キャッシュ**: Redis
  - セッションデータ
  - 音声処理結果の一時保存
- **ファイルストレージ**: ローカルファイルシステム
  - 音声ファイル: `/data/audio/{session_id}/`
  - レポート: `/data/reports/{session_id}/`

#### 開発環境
- **パッケージ管理**: Poetry または uv (高速)
- **コード品質**:
  - Linter: Ruff (Python), ESLint (TypeScript)
  - Formatter: Ruff format, Prettier
  - 型チェック: mypy (Python), TypeScript
- **テスト**:
  - Backend: pytest + pytest-asyncio
  - Frontend: Vitest + React Testing Library
  - E2E: Playwright (Phase 2以降)
- **コンテナ化**: Docker + Docker Compose
  - 開発環境の統一
  - デプロイの簡易化

#### デプロイ環境
- **推奨構成**: Docker Compose on Linux Server
  - サービス: FastAPI, PostgreSQL, Redis, Celery Worker
  - リバースプロキシ: Nginx
- **最小構成**: Windows PC + SQLite (小規模校向け)
  - Python環境 + npm でスタンドアロン起動

---

## 5. 開発フェーズ

### Phase 1: MVP (最小限の機能)
**目標**: 基本的な面接評価ができる
- [ ] 音声認識・文字起こし
- [ ] シンプルな評価項目での採点
- [ ] メモ機能
- [ ] 基本的なレポート出力

### Phase 2: データ連携・履歴管理
- [ ] 生徒データ管理機能（プロフィール、成績、活動記録）
- [ ] 履歴管理（過去セッションの保存・検索）
- [ ] 複数セッションの比較機能
- [ ] スコア推移グラフ・可視化
- [ ] PDF レポート自動生成

### Phase 3: 高度な分析
- [ ] 音声分析(感情、イントネーション)
- [ ] 敬語・言葉遣いの詳細チェック
- [ ] AI による想定質問生成

### Phase 4: 拡張機能
- [ ] ビデオ分析(ノートPCカメラ使用: 表情、姿勢、視線)
  - OpenCV + MediaPipe for face detection
  - 感情認識: DeepFace または FER
- [ ] 学校データとの本格連携(CSV/API)
- [ ] LLMベースのレコメンデーション機能
- [ ] モバイルアプリ対応(生徒の自主練習用)

---

## 6. 制約事項・リスク

### 6.1 技術的制約
- 日本語感情分析の精度限界
- リアルタイム処理のハードウェア要件
  - Whisper推奨: GPU (NVIDIA) または CPU (Intel i5以上、8GB RAM)
  - 同時処理数はサーバースペックに依存
- イントネーション評価の客観的基準の難しさ
- ビデオ分析は別途カメラ・照明環境が必要 (Phase 4)

### 6.2 運用上の制約
- 学校のIT環境のばらつき
- 教師のITリテラシー
- 初期データ投入の負担

### 6.3 リスク
- 過度なAI依存による教師の判断力低下
- 評価の画一化
- 生徒のプライバシー懸念

---

## 7. 成功指標(KPI)

- 導入学校数: 1年目に5校
- 教師の満足度: 80%以上
- 面接練習の実施回数: 従来比150%
- 生徒のフィードバック満足度: 75%以上
- システム起因のトラブル: 月1件以下

---

## 8. 次のステップ

1. **プロトタイプ開発計画の策定**
2. **技術検証 (PoC)**
   - Whisperの日本語認識精度確認
   - リアルタイム処理の負荷テスト
   - 敬語判定ルールの精度検証
3. **UI/UXデザインのモックアップ作成**
4. **協力校の選定・ヒアリング**

---

## 備考
- この要件定義は初期バージョンであり、開発を進める中で随時更新する
- 教育現場からのフィードバックを重視し、柔軟に仕様変更を行う
