# 圧勝面接 - ユーザーマニュアル

## ドキュメント情報
- **作成日**: 2025年12月20日
- **バージョン**: 1.0
- **プロジェクト名**: 圧勝面接 (mensetu_renshyuu)

---

## 目次
1. [はじめに](#1-はじめに)
2. [インストール方法](#2-インストール方法)
3. [基本的な使い方](#3-基本的な使い方)
4. [レポートの見方](#4-レポートの見方)
5. [よくある質問](#5-よくある質問)
6. [トラブルシューティング](#6-トラブルシューティング)

---

## 1. はじめに

### 1.1 圧勝面接とは
圧勝面接は、AI技術を使って面接練習を分析し、客観的なフィードバックを提供する無料ツールです。

### 1.2 主な機能
- 📝 **文字起こし**: 面接練習の音声を自動でテキスト化
- 👥 **話者分離**: 教師と生徒の発話を自動で区別
- 📊 **音声分析**: 声の高さ、音量、話速などを数値化
- 😊 **感情分析**: 自信度、緊張度、落ち着き度を推定
- 🎯 **敬語チェック**: 適切な敬語が使えているか評価
- 📈 **レポート生成**: 分析結果をグラフ付きで表示

### 1.3 こんな方におすすめ
- 就職活動を控えた大学生
- 受験面接の準備をする高校生
- 面接指導を行う教員
- 面接対策をサポートする保護者

---

## 2. インストール方法

### 2.1 システム要件

#### 必須環境
- **OS**: Windows 10/11, macOS 11+, Ubuntu 20.04+
- **CPU**: Intel Core i5 以上 / Apple M1 以上
- **メモリ**: 8GB以上
- **ストレージ**: 5GB以上の空き容量
- **インターネット**: 初回セットアップ時のみ必要

#### 推奨環境
- **メモリ**: 16GB
- **SSD**: ストレージがSSDの場合、処理が高速化します

### 2.2 インストール手順

#### Windows

1. **Pythonのインストール**
   - [Python公式サイト](https://www.python.org/downloads/)から Python 3.9以上をダウンロード
   - インストール時に「Add Python to PATH」にチェック

2. **Gitのインストール**
   - [Git公式サイト](https://git-scm.com/downloads)からダウンロード・インストール

3. **プロジェクトのダウンロード**
   ```powershell
   git clone https://github.com/ootomonaiso/mensetu_renshyuu.git
   cd mensetu_renshyuu
   ```

4. **依存関係のインストール**
   ```powershell
   pip install -r requirements.txt
   ```

5. **Ollamaのインストール**
   - [Ollama公式サイト](https://ollama.ai/)からダウンロード・インストール
   - インストール後、以下を実行:
   ```powershell
   ollama pull llama3.2
   ```

6. **HuggingFace トークンの設定**（pyannote.audio用）
   - [HuggingFace](https://huggingface.co/settings/tokens)でトークンを作成
   - `.env`ファイルを作成し、以下を記述:
   ```
   HUGGINGFACE_TOKEN=your_token_here
   ```

#### macOS

```bash
# Homebrewでインストール
brew install python@3.11 git

# プロジェクトのダウンロード
git clone https://github.com/ootomonaiso/mensetu_renshyuu.git
cd mensetu_renshyuu

# 依存関係のインストール
pip install -r requirements.txt

# Ollamaのインストール
brew install ollama
ollama pull llama3.2
```

#### Linux (Ubuntu)

```bash
# 必要なパッケージのインストール
sudo apt update
sudo apt install python3.11 python3-pip git ffmpeg

# プロジェクトのダウンロード
git clone https://github.com/ootomonaiso/mensetu_renshyuu.git
cd mensetu_renshyuu

# 依存関係のインストール
pip install -r requirements.txt

# Ollamaのインストール
curl https://ollama.ai/install.sh | sh
ollama pull llama3.2
```

### 2.3 初回起動確認

```bash
# アプリケーションを起動
uvicorn app:app --host 127.0.0.1 --port 8000

# ブラウザで以下にアクセス
# http://127.0.0.1:8000
```

正常に起動すると、圧勝面接のメインページが表示されます。

---

## 3. 基本的な使い方

### 3.1 アプリケーションの起動

#### コマンドプロンプト / ターミナルで起動

```bash
cd mensetu_renshyuu
uvicorn app:app --host 127.0.0.1 --port 8000
```

#### 起動確認
ブラウザで `http://127.0.0.1:8000` にアクセス

### 3.2 音声ファイルのアップロード

#### 方法1: ファイル選択
1. 「ファイルを選択」ボタンをクリック
2. 分析したい音声ファイルを選択（WAV, MP3, M4A等）
3. 「アップロード」ボタンをクリック

#### 方法2: ドラッグ&ドロップ
1. エクスプローラー/Finderから音声ファイルをドラッグ
2. 点線のエリアにドロップ

#### 対応フォーマット
- WAV (.wav)
- MP3 (.mp3)
- M4A (.m4a)
- OGG (.ogg)
- FLAC (.flac)

#### ファイルサイズ制限
- 最大: 100MB
- 推奨: 50MB以下（処理時間短縮のため）

### 3.3 ブラウザからの録音

1. 「録音開始」ボタンをクリック
2. マイクへのアクセスを許可
3. 面接練習を実施
4. 「停止」ボタンをクリック
5. 自動的にアップロード開始

**注意**: 録音時は静かな環境で、マイクに近づきすぎないようにしてください。

### 3.4 処理の待機

アップロード後、以下の処理が自動で実行されます:

1. **文字起こし** (約1〜2分)
2. **話者分離** (約30秒〜1分)
3. **音声分析** (約30秒)
4. **AI補正・敬語チェック** (約1〜2分)
5. **レポート生成** (約10秒)

**処理時間の目安**:
- 5分の音声: 約3〜5分
- 10分の音声: 約6〜10分

画面上のプログレスバーで進捗を確認できます。

### 3.5 レポートの閲覧

処理が完了すると、自動的にレポートページに移動します。

---

## 4. レポートの見方

### 4.1 レポート構成

レポートは以下のセクションで構成されています:

#### 1. サマリーカード
- 録音時間
- 総合評価スコア
- 主要な改善ポイント

#### 2. 文字起こし結果
- 話者別に色分けされたテキスト
- タイムスタンプ付き
- 赤字で修正箇所を表示

#### 3. 音声分析グラフ
- **ピッチ（声の高さ）の時系列変化**
  - 横軸: 時間
  - 縦軸: 周波数（Hz）
  - 適切な範囲が緑のゾーンで表示

- **音量の推移**
  - 適切な音量: -25 〜 -15 dB
  - 小さすぎる: -30 dB以下
  - 大きすぎる: -10 dB以上

- **話速の比較（棒グラフ）**
  - 適切な話速: 300〜400文字/分
  - 速すぎる: 450文字/分以上
  - 遅すぎる: 250文字/分以下

#### 4. 感情分析（レーダーチャート）
- **自信度**: 0.7以上が理想的
- **緊張度**: 0.3以下が理想的
- **落ち着き度**: 0.7以上が理想的
- **明瞭度**: 0.8以上が理想的

#### 5. 敬語評価
- 総合スコア（0〜100点）
- 問題箇所の指摘
- 修正提案

### 4.2 スコアの解釈

#### 総合評価スコア

| スコア | 評価 | 説明 |
|-------|------|------|
| 90-100 | 優秀 | 面接にふさわしい話し方ができています |
| 75-89 | 良好 | 概ね良好ですが、いくつか改善点があります |
| 60-74 | 要改善 | 改善が必要な点が複数あります |
| 0-59 | 要努力 | 大幅な改善が必要です |

#### 敬語スコア

| スコア | 評価 |
|-------|------|
| 90-100 | 敬語の使用が完璧です |
| 75-89 | 概ね適切ですが、一部改善余地があります |
| 60-74 | 敬語の使用に問題があります |
| 0-59 | 敬語の理解が不十分です |

### 4.3 改善アドバイスの読み方

#### ピッチ（声の高さ）
- **高すぎる場合**: リラックスして、自然な声のトーンを意識
- **低すぎる場合**: 明るく、前向きな印象を与えるよう意識
- **変動が大きい**: 落ち着いて、一定のトーンを保つ

#### 音量
- **小さすぎる**: 自信を持って、はっきりと話す
- **大きすぎる**: 適度な音量を心がける

#### 話速
- **速すぎる**: 一呼吸置いて、ゆっくり話す
- **遅すぎる**: テンポよく、スムーズに話す

#### 感情スコア
- **緊張度が高い**: 深呼吸、リラックス技法を試す
- **自信度が低い**: 何度も練習して慣れる

---

## 5. よくある質問

### Q1. 処理にどれくらい時間がかかりますか？
**A**: 5分の音声で約3〜5分、10分の音声で約6〜10分が目安です。PCのスペックによって変動します。

### Q2. どんな音声ファイルに対応していますか？
**A**: WAV, MP3, M4A, OGG, FLACに対応しています。

### Q3. インターネット接続は必要ですか？
**A**: 初回セットアップ時のみ必要です。モデルのダウンロード後はオフラインで利用可能です。

### Q4. データはどこに保存されますか？
**A**: すべてのデータはローカル（あなたのPC内）に保存され、外部に送信されることはありません。

### Q5. 録音データは安全ですか？
**A**: はい。録音データは完全にローカル処理され、外部サーバーに送信されることはありません。

### Q6. 複数人で同時に使えますか？
**A**: 現在のバージョンは1人ずつの利用を想定しています。

### Q7. 英語の面接にも対応していますか？
**A**: 現在は日本語のみ対応しています。英語対応は今後の実装予定です。

### Q8. 過去のレポートは保存されますか？
**A**: はい。データベースに保存され、いつでも閲覧可能です。

### Q9. レポートを削除できますか？
**A**: はい。レポート一覧から削除可能です。

### Q10. 商用利用できますか？
**A**: MITライセンスで公開されているため、商用利用も可能です。

---

## 6. トラブルシューティング

### 6.1 起動エラー

#### エラー: `ModuleNotFoundError: No module named 'XXX'`
**原因**: 依存パッケージがインストールされていない
**解決方法**:
```bash
pip install -r requirements.txt
```

#### エラー: `Address already in use`
**原因**: ポート8000が既に使用されている
**解決方法**:
```bash
# 別のポートを使用
uvicorn app:app --host 127.0.0.1 --port 8001
```

### 6.2 処理エラー

#### エラー: `Whisper初期化失敗`
**原因**: Whisperモデルのダウンロードに失敗
**解決方法**:
```bash
# モデルを手動でダウンロード
python -c "import whisper; whisper.load_model('medium')"
```

#### エラー: `pyannote.audio初期化失敗`
**原因**: HuggingFaceトークンが設定されていない
**解決方法**:
1. [HuggingFace](https://huggingface.co/settings/tokens)でトークンを作成
2. `.env`ファイルに記述:
```
HUGGINGFACE_TOKEN=your_token_here
```

#### エラー: `Ollama接続失敗`
**原因**: Ollamaが起動していない
**解決方法**:
```bash
# Ollamaを起動
ollama serve

# 別のターミナルでモデルをダウンロード
ollama pull llama3.2
```

### 6.3 音声ファイルエラー

#### エラー: `ファイル形式が非対応`
**解決方法**: 対応フォーマット（WAV, MP3, M4A, OGG, FLAC）に変換してください。

#### エラー: `ファイルサイズが大きすぎる`
**解決方法**: 100MB以下に圧縮するか、音声を分割してください。

#### エラー: `音声が短すぎる`
**解決方法**: 最低1秒以上の音声が必要です。

### 6.4 パフォーマンス問題

#### 処理が遅い
**解決方法**:
- 他のアプリケーションを終了してメモリを確保
- 軽量モデルを使用:
  ```python
  # src/audio/transcriber.py を編集
  model_name = "small"  # mediumの代わり
  ```

#### メモリ不足エラー
**解決方法**:
- 音声ファイルを短くする（5分以内を推奨）
- PCのメモリを増設

### 6.5 レポート表示問題

#### グラフが表示されない
**解決方法**:
```bash
pip install matplotlib seaborn
```

#### 日本語が文字化けする
**解決方法**: 日本語フォントをインストール
- Windows: 自動対応
- macOS: 自動対応
- Linux:
```bash
sudo apt install fonts-noto-cjk
```

---

## 7. アップデート方法

### 7.1 最新バージョンの確認

```bash
cd mensetu_renshyuu
git fetch origin
git status
```

### 7.2 アップデート手順

```bash
# 最新版をダウンロード
git pull origin main

# 依存関係を更新
pip install -r requirements.txt --upgrade

# アプリケーションを再起動
uvicorn app:app --host 127.0.0.1 --port 8000
```

---

## 8. アンインストール方法

### 8.1 アプリケーションの削除

```bash
# プロジェクトフォルダを削除
rm -rf mensetu_renshyuu  # macOS/Linux
rmdir /s mensetu_renshyuu  # Windows
```

### 8.2 関連ツールの削除

```bash
# Ollamaのアンインストール
# Windows: コントロールパネルから
# macOS: brew uninstall ollama
# Linux: sudo rm -rf /usr/local/bin/ollama
```

---

## 9. サポート

### 9.1 問い合わせ先
- **GitHub Issues**: https://github.com/ootomonaiso/mensetu_renshyuu/issues
- **Email**: （記載が必要な場合）

### 9.2 コミュニティ
- **GitHub Discussions**: （記載が必要な場合）

---

## 10. ライセンス

本プロジェクトはMITライセンスで公開されています。
詳細は [LICENSE](../LICENSE) ファイルをご覧ください。

---

## 11. 謝辞

本プロジェクトは以下のオープンソースプロジェクトを使用しています:
- OpenAI Whisper
- pyannote.audio
- Ollama / Llama 3.2
- FastAPI
- librosa

---

## 変更履歴

| バージョン | 日付 | 変更内容 |
|----------|------|---------|
| 1.0 | 2025-12-20 | 初版作成 |

---

**最終更新日**: 2025年12月20日
