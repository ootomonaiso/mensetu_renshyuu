# 学校特化型面接支援システム 要件定義書

**作成日**: 2025年11月28日  
**プロジェクト名**: 圧勝面接

---

## 1. プロジェクト概要

### 1.1 目的
学校現場における生徒と教師の面接練習を、第三者視点でリアルタイム評価・分析し、客観的なフィードバックを提供するシステムを構築する。

### 1.2 ターゲットユーザー
- **主要ユーザー**: 高校・大学の進路指導担当教師
- **二次ユーザー**: 就職・進学を控えた生徒
- **利用シーン**: 進路指導室での模擬面接、面接練習セッション

### 1.3 既存製品との差別化
- 学校が保有する生徒データ(成績、活動記録等)との連携
- 日本語特有の敬語・言葉遣いの詳細分析
- ローカル環境での動作(プライバシー重視)
- 複数教師による評価の一元管理
- 学校内での過去データ蓄積・活用

---

## 2. 機能要件

### 2.1 コア機能

#### A. リアルタイム面接評価機能
- **音声認識・文字起こし**
  - リアルタイムで面接内容をテキスト化
  - 発話者の自動識別(教師/生徒)
  - タイムスタンプ付き記録

- **音声分析**
  - 話速の測定
  - 声の大きさ・トーン分析
  - 間(ポーズ)の分析
  - イントネーション評価
  - 感情推定(自信度、緊張度など)

- **言語分析**
  - 敬語使用の適切性チェック
  - 言葉遣いの評価(「えーと」「あの」などのフィラー検出)
  - 文法チェック
  - キーワード検出(志望動機に関連する語彙など)

#### B. 評価・採点機能
- **評価項目のカスタマイズ**
  - 学校・面接種別ごとの評価項目設定
  - 評価基準のテンプレート管理
  
- **評価項目例**:
  - 身だしなみ・態度
  - 話し方(明瞭さ、スピード、声の大きさ)
  - 敬語・言葉遣い
  - 質問への適切性
  - 論理性・一貫性
  - 熱意・意欲
  - ※表情・アイコンタクト(Phase 4で対応予定)

- **リアルタイムメモ機能**
  - 評価者が気づいた点をタイムスタンプ付きで記録
  - 良かった点/改善点の分類

#### C. 生徒データ連携機能
- **基本情報管理**
  - 生徒プロフィール(学年、クラス、志望先)
  - 成績データ(得意科目、GPA等)
  - 活動記録(部活、委員会、ボランティア等)
  - 資格・検定取得状況

- **データ活用**
  - 生徒の実績に基づく想定質問の自動生成
  - 自己PR材料の提案
  - 志望先に応じた面接対策アドバイス

#### D. 履歴管理機能
- **個人の成長追跡**
  - 複数回の面接練習の比較
  - スコアの推移グラフ
  - 弱点の可視化
  - 過去セッションの振り返り再生

#### E. 個人レポート生成機能
- **生徒向けフィードバックレポート**
  - 総合評価スコア
  - 評価項目別の詳細スコア（レーダーチャート）
  - 良かった点・改善点の具体的指摘
  - 発話内容の文字起こし（ハイライト付き）
  - 次回までの具体的な練習課題
  - 過去セッションとの比較

- **教師向け指導レポート**
  - 詳細な分析データ（音声分析結果含む）
  - タイムスタンプ付きメモ一覧
  - 過去の指導履歴
  - 印刷可能なPDFフォーマット

### 2.2 副次機能
- **質問バンク管理**
  - よくある質問のデータベース
  - 業界・志望先別の質問集
  - 学校独自の質問追加

- **過去データ検索**
  - 先輩の面接記録(匿名化)
  - 志望先別の成功事例
  - 頻出質問の傾向

---

## 3. 非機能要件

### 3.1 性能要件
- リアルタイム文字起こしの遅延: 2秒以内
- 面接セッションの同時処理: 最大10セッション
- レポート生成時間: 30秒以内

### 3.2 セキュリティ・プライバシー
- 生徒の個人情報保護(個人情報保護法準拠)
- ローカルネットワーク内での運用
- データの暗号化保存
- アクセス権限管理(教師/管理者/生徒)
- データバックアップ機能

### 3.3 使いやすさ
- 教師が直感的に操作できるUI
- タブレット対応(面接室での使用を想定)
- 最小限のセットアップ(マイク接続のみ)

### 3.4 拡張性
- 新しい評価項目の追加が容易
- 他の学校システムとのデータ連携(CSV/API)
- 将来的なビデオ分析への対応

---

## 4. 技術要件

### 4.1 技術スタック概要 (簡易版 MVP)

#### 主要技術
- **Backend**: FastAPI (Python 3.11+) - ファイルアップロード受付のみ
- **音声処理**: faster-whisper (文字起こし) + librosa (音響分析)
- **AI 分析**: Gemini API (キーワード/敬語/感情分析)
- **レポート出力**: Markdown (教師コメント欄付き)

#### システム構成 (シンプル版)
```
[ローカル PC]
  ↓ 音声ファイルアップロード
[FastAPI サーバー]
  ↓
[音声処理] → [faster-whisper] → [librosa] → [Gemini API]
  ↓
[Markdown レポート生成] → `output/reports/` に保存
```

### 4.2 動作環境
- **PC**: Windows/Mac/Linux (CPU: i5+, RAM: 8GB+)
- **Python**: 3.11+
- **ブラウザ**: Chrome/Edge/Firefox (ファイルアップロード用)

### 4.3 コスト概算
- **初期**: ¥0 (既存 PC で動作)
- **年間**: ¥0~6,000 (Gemini API 従量課金)
  - 無料枠: 1,500 リクエスト/日
  - 有料: ~¥0.07/リクエスト

---

## 7. 開発フェーズ

### Phase 1: MVP (簡易版 - ローカル完結)
**目標**: 音声ファイルから分析レポートを生成
- [ ] 音声ファイルアップロード API
- [ ] faster-whisper で文字起こし
- [ ] librosa で音響分析 (話速、音量、ポーズ)
- [ ] Gemini API でキーワード抽出・敬語チェック・感情分析
- [ ] Markdown レポート生成 (教師コメント欄付き)
- [ ] ローカルファイルシステムに保存 (`output/reports/`)

### Phase 2: Web UI 追加 (将来)
- [ ] React フロントエンド (ファイルアップロード)
- [ ] レポート一覧・閲覧画面
- [ ] PDF 出力 (WeasyPrint)

### Phase 3: データ管理 (将来)
- [ ] SQLite でセッション履歴管理
- [ ] スコア推移グラフ
- [ ] 生徒情報の簡易管理

### Phase 4: 高度な分析 (映像・感情・生体信号)
- [ ] **音声感情分析**: 声のトーン・震え・抑揚から緊張度・自信度を検出
  - librosa で基本周波数 (F0) の変動分析
  - ジッター (声の震え) 検出
  - MFCC (メル周波数ケプストラム係数) で感情推定
- [ ] **ビデオ分析** (ノート PC カメラ使用)
  - **表情分析**: 笑顔・緊張・困惑などの感情検出 (MediaPipe Face Mesh)
  - **視線追跡**: アイコンタクトの頻度・方向 (MediaPipe Face Detection)
  - **姿勢分析**: 猫背・前傾姿勢・手の動き (MediaPipe Pose)
  - **ジェスチャー検出**: 手を組む・髪を触るなどの癖 (MediaPipe Hands)
- [ ] **リアルタイム処理**: WebSocket で音声+映像を同時ストリーミング分析
- [ ] **統合レポート**: 音声・映像・感情を統合した総合評価
- [ ] **学校データ連携** (将来)

---

## 6. 制約事項・リスク

### 6.1 技術的制約
- 日本語感情分析の精度限界
- リアルタイム処理のハードウェア要件
  - Whisper推奨: GPU (NVIDIA) または CPU (Intel i5以上、8GB RAM)
  - 同時処理数はサーバースペックに依存
- イントネーション評価の客観的基準の難しさ
- ビデオ分析は別途カメラ・照明環境が必要 (Phase 4)

### 6.2 運用上の制約
- 学校のIT環境のばらつき
- 教師のITリテラシー
- 初期データ投入の負担

### 6.3 リスク
- 過度なAI依存による教師の判断力低下
- 評価の画一化
- 生徒のプライバシー懸念

---

## 7. 成功指標(KPI)

- 導入学校数: 1年目に5校
- 教師の満足度: 80%以上
- 面接練習の実施回数: 従来比150%
- 生徒のフィードバック満足度: 75%以上
- システム起因のトラブル: 月1件以下

---

## 8. 次のステップ

1. **プロトタイプ開発計画の策定**
2. **技術検証 (PoC)**
   - Whisperの日本語認識精度確認
   - リアルタイム処理の負荷テスト
   - 敬語判定ルールの精度検証
3. **UI/UXデザインのモックアップ作成**
4. **協力校の選定・ヒアリング**

---

## 備考
- この要件定義は初期バージョンであり、開発を進める中で随時更新する
- 教育現場からのフィードバックを重視し、柔軟に仕様変更を行う
